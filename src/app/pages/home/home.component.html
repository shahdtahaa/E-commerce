<!-- Hero Section -->
<section class="py-8 bg-[#f9f6f1]">
    <div class="container w-[90%] mx-auto flex flex-col lg:flex-row gap-6 items-start">

        <!-- Main Slider -->
        <div class="w-full lg:w-3/4" data-aos="fade-up">
            <owl-carousel-o [options]="mainSliderOptions">
                <ng-template carouselSlide>
                    <img src="./images/img1.avif" alt="slide"
                        class="rounded-xl shadow-md max-h-[400px] w-full object-contain bg-white p-2" />
                </ng-template>
                <ng-template carouselSlide>
                    <img src="./images/img2.avif" alt="slide"
                        class="rounded-xl shadow-md max-h-[400px] w-full object-contain bg-white p-2" />
                </ng-template>
                <ng-template carouselSlide>
                    <img src="./images/img3.avif" alt="slide"
                        class="rounded-xl shadow-md max-h-[400px] w-full object-contain bg-white p-2" />
                </ng-template>
                <ng-template carouselSlide>
                    <img src="./images/img4.avif" alt="slide"
                        class="rounded-xl shadow-md max-h-[400px] w-full object-contain bg-white p-2" />
                </ng-template>
            </owl-carousel-o>
        </div>

        <!-- Side Banners -->
        <div class="w-full lg:w-1/4 flex flex-col gap-4" data-aos="fade-left">
            <img src="./images/grocery-banner.png" alt="banner 1"
                class="rounded-xl shadow-md max-h-[195px] object-contain bg-white p-2" />
            <img src="./images/grocery-banner-2.jpeg" alt="banner 2"
                class="rounded-xl shadow-md max-h-[195px] object-contain bg-white p-2" />
        </div>
    </div>
</section>

@if (productsData && categoriesData) {

<!-- Categories -->
<section class="py-8 bg-white" data-aos="fade-up">
    <div class="container w-[90%] mx-auto">
        <h2 class="text-2xl font-bold mb-4 text-[#1c1c1e]">All Categories</h2>
        <owl-carousel-o [options]="categoriesSliderOptions">
            @for (category of categoriesData; track category._id) {
            <ng-template carouselSlide>
                <div class="rounded-xl overflow-hidden shadow hover:shadow-lg transition">
                    <img [src]="category.image" [alt]="category.name"
                        class="w-full max-h-[250px] object-contain bg-[#f9f6f1] p-3" />
                </div>
            </ng-template>
            }
        </owl-carousel-o>
    </div>
</section>

<!-- Product Section -->
<section class="py-8 bg-[#f9f6f1]" data-aos="fade-up" data-aos-delay="100">
    <div class="container w-[90%] mx-auto">

        <!-- Search -->
        <div class="mb-6">
            <h2 class="text-2xl font-bold mb-3 text-[#1c1c1e]">Recommended Products</h2>
            <input [(ngModel)]="searchValue" type="text" placeholder="Search by name..."
                class="w-full md:w-1/2 p-3 border border-gray-300 rounded-md shadow-sm text-[#1c1c1e] placeholder-[#8e8e93] bg-white focus:ring focus:ring-[#d6c7ae]" />
        </div>

        <!-- Product Cards -->
        <div class="grid gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5">
            @for (product of productsData.slice(0, 40) | search: searchValue; track product._id) {
            <div
                class="bg-white rounded-2xl border border-gray-200 shadow hover:shadow-lg transition-all duration-300 p-4 flex flex-col justify-between relative group">

                <!-- Wishlist Icon -->
                <div class="absolute top-3 right-3 z-10">
                    <i (click)="addToWishlist(product._id)"
                        class="fa-solid fa-heart text-xl cursor-pointer transition-colors duration-300"
                        [class.text-red-600]="wishlistIds.includes(product._id)"
                        [class.text-gray-400]="!wishlistIds.includes(product._id)">
                    </i>
                </div>

                <!-- Product Image -->
                <div [routerLink]="['/product-Details', product._id]" class="cursor-pointer">
                    <img [src]="product.imageCover" [alt]="product.title"
                        class="w-full h-48 object-contain rounded-md bg-white p-2" />
                    <div class="mt-3">
                        <p class="text-sm text-[#8e8e93]">{{ product.category.name }}</p>
                        <h3 class="font-semibold text-base text-[#1c1c1e] line-clamp-2">
                            {{ product.title.split(' ').slice(0, 3).join(' ') }}
                        </h3>
                    </div>
                </div>


                <!-- Price & Rating -->
                <div class="mt-3 flex items-center justify-between text-sm">
                    <span class="font-bold text-[#1c1c1e]">${{ product.price }}</span>
                    <span class="flex items-center gap-1 text-yellow-500">
                        <i class="fa-solid fa-star"></i> {{ product.ratingsAverage }}
                    </span>
                </div>

                <!-- Add to Cart -->
                <button (click)="addToCart(product._id)"
                    class="mt-4 bg-[#d6c7ae] hover:bg-[#c5b58f] text-white py-2 rounded-md transition">
                    + Add to Cart
                </button>
            </div>
            }
        </div>
    </div>
</section>
}