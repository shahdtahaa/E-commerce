<section class="py-8 bg-[#f9f6f1]" data-aos="fade-up" data-aos-delay="100">
  <div class="container w-[90%] mx-auto">
    
    <!-- Search -->
    <div class="mb-6">
      <h2 class="text-2xl font-bold mb-3 text-[#1c1c1e]">All Products</h2>
      <input
        [(ngModel)]="searchValue"
        type="text"
        placeholder="Search by name ...."
        class="w-full md:w-1/2 p-3 border border-gray-300 rounded-md shadow-sm text-[#1c1c1e] placeholder-[#8e8e93] bg-white focus:ring focus:ring-[#d6c7ae]"
      />
    </div>

    <!-- Product Cards -->
    <div class="grid gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5">
      @for (product of productsData.slice(0, 40) | search: searchValue; track product._id) {
        <div class="bg-white rounded-2xl border border-gray-200 shadow hover:shadow-lg transition-all duration-300 p-4 flex flex-col justify-between relative group">
          
          <!-- Wishlist Icon -->
          <div class="absolute top-3 right-3 z-10">
            <i
              (click)="addToWishlist(product._id)"
              class="fa-solid fa-heart text-xl cursor-pointer transition-colors duration-300"
              [class.text-red-600]="wishlistIds.includes(product._id)"
              [class.text-gray-400]="!wishlistIds.includes(product._id)">
            </i>
          </div>

          <!-- Product Image -->
          <div [routerLink]="['/product-Details', product._id]" class="cursor-pointer">
            <img [src]="product.imageCover" [alt]="product.title"
              class="w-full h-48 object-contain rounded-md bg-white p-2" />
            <div class="mt-3">
              <p class="text-sm text-[#8e8e93]">{{ product.category.name }}</p>
              <h3 class="font-semibold text-base text-[#1c1c1e] line-clamp-2">
                {{ product.title.split(' ').slice(0, 3).join(' ') }}
              </h3>
            </div>
          </div>

          <!-- Price & Rating -->
          <div class="mt-3 flex items-center justify-between text-sm">
            <span class="font-bold text-[#1c1c1e]">${{ product.price }}</span>
            <span class="flex items-center gap-1 text-yellow-500">
              <i class="fa-solid fa-star"></i> {{ product.ratingsAverage }}
            </span>
          </div>

          <!-- Add to Cart -->
          <button
            (click)="addToCart(product._id)"
            class="mt-4 bg-[#d6c7ae] hover:bg-[#c5b58f] text-white py-2 rounded-md transition">
            + Add to Cart
          </button>
        </div>
      }
    </div>
  </div>
</section>
